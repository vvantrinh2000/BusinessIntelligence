<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sticky Notes ‚Äî Local Only</title>
  <style>
    :root{
      --bg:#0f172a;
      --panel:#111827cc;
      --muted:#94a3b8;
      --accent:#22c55e;
      --danger:#ef4444;
      --note-w: 240px;
      --note-h: 200px;
      --radius:16px;
      --shadow: 0 10px 25px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial; background: radial-gradient(1200px 800px at 20% -10%, #1e293b 0%, #0b1223 45%, var(--bg) 100%); color:#e5e7eb; overflow:hidden;}
    .topbar{position:fixed; inset: 16px 16px auto 16px; display:flex; gap:8px; align-items:center; z-index:10000; background:linear-gradient(180deg, #0b1223aa, #0b1223aa), #0b1223; backdrop-filter: blur(8px); border:1px solid #1f2937; border-radius:24px; padding:10px 12px; box-shadow: var(--shadow);}
    .topbar h1{font-size:16px; font-weight:700; margin:0 8px 0 2px; color:#f8fafc}
    .topbar .hint{color:var(--muted); font-size:12px}
    .spacer{flex:1}
    button{border:1px solid #243142; background:#111827; color:#e5e7eb; padding:8px 12px; border-radius:12px; cursor:pointer; font-weight:600; transition:.18s;}
    button:hover{ transform: translateY(-1px); border-color:#2f4058; box-shadow: 0 4px 14px rgba(0,0,0,.3)}
    .btn-accent{ background:#102a19; border-color:#184a2a }
    .btn-danger{ background:#2a1414; border-color:#512222 }
    .counter{font-size:12px; color:#a3b2c5; padding:0 6px}

    #board{ position:fixed; inset:0; padding-top:70px; }

    .note{position:absolute; width:var(--note-w); height:var(--note-h); border-radius: var(--radius); box-shadow: var(--shadow); overflow:hidden; user-select:none; border:1px solid rgba(0,0,0,.15);}
    .note .header{height:40px; display:flex; align-items:center; gap:8px; padding:8px 10px; cursor:grab; font-weight:700; background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(0,0,0,.04));}
    .note .title{ flex:1; outline:none; border:none; background:transparent; font: inherit; color:#0f172a; padding:6px 8px; border-radius:8px; max-width:60%; opacity:.85 }
    .note .content{height: calc(100% - 40px); padding:10px 12px; overflow:auto; outline:none; font-size:14px; line-height:1.45;}
    .icon-btn{width:28px; height:28px; border-radius:10px; display:grid; place-items:center; background: rgba(255,255,255,.55); border:1px solid rgba(0,0,0,.1);}

    .yellow{ background:#fde68a }
    .pink{ background:#fbcfe8 }
    .green{ background:#bbf7d0 }
    .blue{ background:#bae6fd }
    .purple{ background:#e9d5ff }
    .orange{ background:#fed7aa }

    .text-black{ color:#000 }
    .text-red{ color:#b91c1c }
    .text-green{ color:#065f46 }
    .text-blue{ color:#1e3a8a }
    .text-purple{ color:#5b21b6 }
    .text-gray{ color:#374151 }
  </style>
</head>
<body>
  <div class="topbar">
    <h1>Sticky Notes</h1>
    <span class="hint">Local & private</span>
    <span class="spacer"></span>
    <button id="newNote" class="btn-accent">Ôºã New</button>
    <button id="exportNotes">Export</button>
    <button id="importNotes">Import</button>
    <button id="clearAll" class="btn-danger">Clear</button>
    <span id="count" class="counter"></span>
  </div>
  <div id="board"></div>

  <script>
  (()=>{
    const STORAGE_KEY = 'stickyNotes_v2';
    const board = document.getElementById('board');

    let zTop = 10;
    const palette = ['yellow','pink','green','blue','purple','orange'];
    const textColors = ['text-black','text-red','text-green','text-blue','text-purple','text-gray'];

    function uid(){ return Math.random().toString(36).slice(2,9) }
    function save(notes){ localStorage.setItem(STORAGE_KEY, JSON.stringify(notes)) }
    function load(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]') }catch{ return [] } }

    function noteTemplate(n){
      const el = document.createElement('div');
      el.className = `note ${n.color} ${n.textColor||'text-black'}`;
      el.style.left = n.x+'px'; el.style.top = n.y+'px';
      el.style.width = (n.w||240)+'px'; el.style.height = (n.h||200)+'px';
      el.style.zIndex = n.z||1;
      el.dataset.id = n.id;
      el.innerHTML = `
        <div class="header">
          <input class="title" type="text" placeholder="Title" value="${n.title||''}" />
          <div class="controls">
            <button class="icon-btn" title="Change bg">üé®</button>
            <button class="icon-btn" title="Text color">üñåÔ∏è</button>
            <button class="icon-btn" title="Delete">‚úï</button>
          </div>
        </div>
        <div class="content" contenteditable="true">${n.content||''}</div>`;
      return el;
    }

    function fromEl(el){
      return {
        id: el.dataset.id,
        title: el.querySelector('.title').value,
        content: el.querySelector('.content').innerHTML,
        x: parseInt(el.style.left),
        y: parseInt(el.style.top),
        w: parseInt(el.style.width),
        h: parseInt(el.style.height),
        z: parseInt(el.style.zIndex||1),
        color: palette.find(c=>el.classList.contains(c))||palette[0],
        textColor: textColors.find(c=>el.classList.contains(c))||'text-black'
      }
    }

    function persist(){ save([...board.querySelectorAll('.note')].map(fromEl)) }

    function newNote(initial={}){
      const note = {
        id: uid(), title: initial.title||'', content: initial.content||'',
        x: initial.x||40, y: initial.y||80, w: initial.w, h: initial.h,
        z: ++zTop, color: initial.color||palette[0], textColor: initial.textColor||'text-black'
      };
      const el = noteTemplate(note);
      board.appendChild(el);
      attach(el);
      persist();
    }

    function cycleColor(el){
      const current = palette.findIndex(c=>el.classList.contains(c));
      const next = palette[(current+1)%palette.length];
      palette.forEach(c=>el.classList.remove(c));
      el.classList.add(next);
      persist();
    }

    function cycleTextColor(el){
      const current = textColors.findIndex(c=>el.classList.contains(c));
      const next = textColors[(current+1)%textColors.length];
      textColors.forEach(c=>el.classList.remove(c));
      el.classList.add(next);
      persist();
    }

    function attach(el){
      const header = el.querySelector('.header');
      const [btnBg, btnTxt, btnDel] = el.querySelectorAll('.icon-btn');
      header.addEventListener('mousedown', e=>{
        const startX=e.clientX, startY=e.clientY, ox=parseInt(el.style.left), oy=parseInt(el.style.top);
        function move(ev){ el.style.left = ox+ev.clientX-startX+'px'; el.style.top = oy+ev.clientY-startY+'px'; }
        function up(){ document.removeEventListener('mousemove',move); document.removeEventListener('mouseup',up); persist() }
        document.addEventListener('mousemove',move); document.addEventListener('mouseup',up);
      });
      el.querySelector('.title').addEventListener('input',persist);
      el.querySelector('.content').addEventListener('input',persist);
      btnBg.addEventListener('click',()=>cycleColor(el));
      btnTxt.addEventListener('click',()=>cycleTextColor(el));
      btnDel.addEventListener('click',()=>{ el.remove(); persist(); });
    }

    document.getElementById('newNote').onclick=()=>newNote();
    document.getElementById('clearAll').onclick=()=>{ if(confirm('Clear all?')){ board.innerHTML=''; persist(); } };

    (load()||[]).forEach(n=>{ const el=noteTemplate(n); board.appendChild(el); attach(el); zTop=Math.max(zTop,n.z||1) });
  })()
  </script>
</body>
</html>